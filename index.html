<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Burger na Churrasqueira - Fa√ßa seu Pedido</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Oswald:wght@500;700&display=swap');
        :root {
            --primary-color: #FFC107; --secondary-color: #D32F2F; --dark-bg: #212121;
            --light-text: #FFFFFF; --dark-text: #333333; --card-bg: #424242;
        }
        body { font-family: 'Roboto', sans-serif; margin: 0; background-color: var(--dark-bg); color: var(--light-text); }
        .header { background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('https://images.unsplash.com/photo-1579685311953-b0e6c6e7f8b9?q=80&w=1770&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaGPOby1wYWdlfHx8fGVufDB8fHx8fA%3D%3D') center/cover; color: var(--light-text); padding: 50px 20px; text-align: center; border-bottom: 5px solid var(--primary-color); }
        .header h1 { font-family: 'Oswald', sans-serif; font-size: 3em; margin: 0; text-transform: uppercase; }
        .container { max-width: 800px; margin: 30px auto; padding: 0 20px; }
        .special-event-notice, .call-to-action, .menu-section, .chapeiro-section { margin-bottom: 30px; }
        .special-event-notice { background-color: var(--secondary-color); color: var(--light-text); text-align: center; padding: 25px 20px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.4); border: 2px solid var(--primary-color); }
        .special-event-notice h2 { font-family: 'Oswald', sans-serif; font-size: 2.2em; margin: 0 0 10px 0; text-transform: uppercase; color: var(--primary-color); }
        .call-to-action { background-color: var(--primary-color); color: var(--dark-text); text-align: center; padding: 25px 20px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.3); }
        .call-to-action h2 { font-family: 'Oswald', sans-serif; font-size: 2.8em; margin: 0; text-transform: uppercase; }
        .menu-section h2 { font-family: 'Oswald', sans-serif; font-size: 2.5em; text-align: center; margin-bottom: 30px; color: var(--primary-color); }
        .menu-item { background-color: var(--card-bg); border-radius: 10px; margin-bottom: 20px; padding: 20px; border-left: 5px solid var(--secondary-color); box-shadow: 0 4px 8px rgba(0,0,0,0.3); display: flex; align-items: center; }
        .menu-item img { width: 100px; height: 100px; object-fit: cover; border-radius: 8px; margin-right: 20px; flex-shrink: 0; border: 2px solid var(--primary-color); }
        .item-details { flex-grow: 1; }
        .item-header { display: flex; justify-content: space-between; align-items: center; }
        .item-header h3 { margin: 0; font-size: 1.6em; color: var(--primary-color); font-family: 'Oswald', sans-serif; }
        .item-price { font-size: 1.5em; font-weight: 700; color: var(--light-text); }
        .item-actions { display: flex; align-items: center; gap: 15px; margin-top: 20px; }
        .quantity-selector { display: flex; align-items: center; gap: 10px; }
        .quantity-selector button { background-color: var(--primary-color); border: none; color: var(--dark-text); width: 30px; height: 30px; font-size: 1.5em; border-radius: 50%; cursor: pointer; }
        .quantity-selector span { font-size: 1.2em; font-weight: bold; min-width: 20px; text-align: center; }
        .add-to-cart-btn { background-color: var(--secondary-color); color: var(--light-text); border: none; padding: 10px 20px; font-size: 1em; font-weight: bold; border-radius: 5px; cursor: pointer; }
        .chapeiro-section { text-align: center; padding: 20px; background-color: var(--card-bg); border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.3); border-top: 5px solid var(--primary-color); }
        .chapeiro-section h3 { font-family: 'Oswald', sans-serif; color: var(--primary-color); font-size: 2em; margin-bottom: 15px; }
        .chapeiro-section img { width: 180px; height: 180px; border-radius: 50%; object-fit: cover; border: 4px solid var(--secondary-color); margin-bottom: 15px; }
        #cart-button { position: fixed; bottom: 25px; right: 25px; background-color: #25D366; color: white; border-radius: 50%; width: 60px; height: 60px; display: none; justify-content: center; align-items: center; font-size: 2.5em; text-decoration: none; box-shadow: 2px 2px 10px rgba(0,0,0,0.4); z-index: 1000; cursor: pointer; }
        #cart-count { position: absolute; top: -5px; right: -5px; background-color: var(--secondary-color); color: white; border-radius: 50%; width: 25px; height: 25px; font-size: 0.6em; display: flex; justify-content: center; align-items: center; font-weight: bold; }
        .modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.7); }
        .modal-content { background-color: var(--card-bg); margin: 5% auto; padding: 20px; border: 1px solid #888; width: 90%; max-width: 500px; border-radius: 10px; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--primary-color); padding-bottom: 10px; }
        .close-btn { color: #aaa; font-size: 28px; font-weight: bold; cursor: pointer; }
        #cart-items-list { list-style: none; padding: 0; margin: 20px 0; max-height: 200px; overflow-y: auto; }
        #cart-items-list li { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #616161; }
        #cart-summary { border-top: 1px solid #616161; padding-top: 10px; }
        #cart-summary p { display: flex; justify-content: space-between; margin: 8px 0; font-size: 1.1em; }
        #cart-summary p.total-final { font-size: 1.5em; font-weight: bold; color: var(--primary-color); margin-top: 15px; }
        #order-form label { display: block; margin-top: 10px; font-weight: bold; }
        #order-form input, #order-form select, #order-form textarea { width: calc(100% - 22px); padding: 10px; margin-top: 5px; border-radius: 5px; border: 1px solid #616161; background-color: var(--dark-bg); color: var(--light-text); font-size: 1em; }
        #delivery-options { background-color: #333; padding: 10px; border-radius: 5px; margin-top: 5px; }
        #delivery-options label { margin-left: 8px; font-weight: normal; }
        .modal-actions { display: flex; justify-content: space-between; margin-top: 20px; }
        #finalize-order-btn, #clear-cart-btn, #submit-order-btn { background-color: var(--secondary-color); color: var(--light-text); border: none; padding: 15px; font-size: 1em; font-weight: bold; border-radius: 5px; cursor: pointer; flex: 1; margin: 0 5px; }
        #clear-cart-btn { background-color: #757575; }
        .footer { text-align: center; padding: 20px; margin-top: 40px; font-size: 0.9em; color: #757575; }
        .footer a { color: #BDBDBD; text-decoration: none; }
        #music-control { position: fixed; bottom: 25px; left: 25px; background-color: var(--card-bg); color: var(--primary-color); border: 2px solid var(--primary-color); border-radius: 50%; width: 50px; height: 50px; font-size: 1.8em; cursor: pointer; display: flex; align-items: center; justify-content: center; z-index: 1000; opacity: 0.7; transition: opacity 0.2s; }
        #music-control:hover { opacity: 1; }
    </style>
</head>
<body>
    <header class="header"><h1>üî• BURGER NA CHURRASQUEIRA üî•</h1><p>O sabor aut√™ntico da brasa!</p></header>
    <div class="container">
        <div class="special-event-notice"><h2>üéâ Dia Especial de Burger Artesanal na Brasa! üéâ</h2><p>Resolvi matar a saudade e vou preparar um dia especial de burger artesanal na brasa!</p><p>üëâ Ser√° <strong>apenas por encomenda antecipada</strong>, com vagas limitadas.</p><p>üëâ Para garantir o pedido, ser√° necess√°rio o <strong>pagamento de 40% antecipado</strong>.</p></div>
        <div class="call-to-action"><h2>Fa√ßa j√° seu pedido!</h2><p>Escolha seus lanches abaixo e clique no carrinho para finalizar.</p></div>
        <div class="menu-section">
            <h2>üçî Nossos Burgers</h2>
            <div id="menu-list"></div>
        </div>
        <div class="chapeiro-section">
            <h3>Conhe√ßa o Chapeiro</h3>
            <img src="bruno-ramalho.jpeg" alt="Bruno Ramalho, Chapeiro">
            <p><strong>Bruno Ramalho</strong>, o cora√ß√£o por tr√°s da brasa. Apaixonado por cozinha e pela arte de criar hamb√∫rgueres inesquec√≠veis, Bruno transforma cada lanche em uma experi√™ncia √∫nica de sabor.</p>
        </div>
    </div>
    <div id="cart-button">üõí<span id="cart-count">0</span></div>
    <div id="cart-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header"><h2>Seu Pedido</h2><span class="close-btn">&times;</span></div>
            <div id="cart-view">
                <ul id="cart-items-list"></ul>
                <div id="cart-summary">
                    <p>Subtotal: <span id="cart-subtotal">R$ 0,00</span></p>
                    <p>Taxa de Entrega: <span id="cart-delivery-fee">R$ 0,00</span></p>
                    <p class="total-final">Total: <span id="cart-total">R$ 0,00</span></p>
                </div>
                <div class="modal-actions"><button id="clear-cart-btn">Limpar Carrinho</button><button id="finalize-order-btn">Finalizar Pedido</button></div>
            </div>
            <div id="form-view" style="display:none;">
                <form id="order-form">
                    <label for="customerName">Seu Nome:</label><input type="text" id="customerName" required>
                    <label for="customerPhone">Seu WhatsApp (com DDD):</label><input type="tel" id="customerPhone" placeholder="19912345678" required>
                    <label style="margin-top: 15px;">Como voc√™ quer receber?</label>
                    <div id="delivery-options"><input type="radio" id="delivery" name="deliveryMethod" value="delivery" checked><label for="delivery">Entrega (Taxa R$ 7,00)</label><br><input type="radio" id="pickup" name="deliveryMethod" value="pickup"><label for="pickup">Retirar no Local</label></div>
                    <div id="address-field"><label for="customerAddress">Endere√ßo de Entrega:</label><input type="text" id="customerAddress" required></div>
                    <label for="customerNotes">Observa√ß√µes:</label><textarea id="customerNotes" rows="2" placeholder="Ex: tirar a cebola, ponto da carne, etc."></textarea>
                    <label for="paymentMethod">Forma de Pagamento:</label><select id="paymentMethod" required><option value="PIX">PIX</option><option value="Cartao na Entrega">Cart√£o na Entrega</option><option value="Dinheiro">Dinheiro</option></select>
                    <button type="submit" id="submit-order-btn" class="add-to-cart-btn">Confirmar e Enviar Pedido</button>
                </form>
            </div>
            <div id="success-view" style="display:none;"><h2>Pedido Enviado com Sucesso!</h2><p>Obrigado! Em breve o chapeiro entrar√° em contato pelo WhatsApp para confirmar.</p></div>
        </div>
    </div>
    
    <audio id="background-music" src="background-music.mp3" loop autoplay muted></audio>
    <div id="music-control">üîá</div>

    <footer class="footer"><p>Desenvolvido por <a href="https://wa.me/5519993562075" target="_blank">Valdinei Rodrigues | Solu√ß√µes Digitais</a></p></footer>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.16.0/firebase-app.js";
        import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/9.16.0/firebase-firestore.js";

        const firebaseConfig = { apiKey: "AIzaSyBWzm7lBAgMq1iCBqWGjIDXPs1FmmsZohc", authDomain: "cardapio-burger-churrasqueira.firebaseapp.com", projectId: "cardapio-burger-churrasqueira", storageBucket: "cardapio-burger-churrasqueira.appspot.com", messagingSenderId: "474684824937", appId: "1:474684824937:web:50d18f8bd6b9e91f6871f8" };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        const menuItems = [
            { id: 1, name: "Cl√°ssico da Brasa", price: 28.00, description: "P√£o brioche, burger 160g, queijo prato, alface, tomate e maionese caseira.", imageUrl: "https://image.pollinations.ai/prompt/gourmet%20charcoal%20burger%20with%20melted%20cheese%20and%20fresh%20vegetables?width=500&height=500&seed=1" },
            { id: 2, name: "BBQ Double", price: 28.00, description: "P√£o brioche, dois burgers de 100g, cheddar, bacon e molho barbecue.", imageUrl: "https://image.pollinations.ai/prompt/double%20bbq%20bacon%20cheeseburger%20on%20charcoal%20grill%20with%20molten%20cheddar?width=500&height=500&seed=2" },
            { id: 3, name: "Frango Crocante", price: 28.00, description: "P√£o brioche, fil√© de frango crocante, mussarela e alface cremosa.", imageUrl: "https://image.pollinations.ai/prompt/crispy%20chicken%20burger%20with%20mozzarella%20and%20creamy%20lettuce%20on%20brioche%20bun?width=500&height=500&seed=3" },
            { id: 4, name: "Tormenta", price: 28.00, description: "P√£o brioche, burger de lingui√ßa artesanal, mussarela, cebola roxa e maionese caseira.", imageUrl: "https://image.pollinations.ai/prompt/artisan%20sausage%20burger%20on%20grill%20with%20melted%20mozzarella%20and%20red%20onion?width=500&height=500&seed=4" }
        ];
        const DELIVERY_FEE = 7.00;
        let cart = [];

        const menuList = document.getElementById('menu-list');
        const cartButton = document.getElementById('cart-button');
        const cartModal = document.getElementById('cart-modal');
        const closeBtn = document.querySelector('.close-btn');
        const cartItemsList = document.getElementById('cart-items-list');
        const cartSubtotalEl = document.getElementById('cart-subtotal');
        const cartDeliveryFeeEl = document.getElementById('cart-delivery-fee');
        const cartTotalEl = document.getElementById('cart-total');
        const cartCount = document.getElementById('cart-count');
        const finalizeOrderBtn = document.getElementById('finalize-order-btn');
        const clearCartBtn = document.getElementById('clear-cart-btn');
        const orderForm = document.getElementById('order-form');
        const cartView = document.getElementById('cart-view');
        const formView = document.getElementById('form-view');
        const successView = document.getElementById('success-view');
        const deliveryOptions = document.querySelectorAll('input[name="deliveryMethod"]');
        const addressField = document.getElementById('address-field');
        const customerAddressInput = document.getElementById('customerAddress');
        const musicControl = document.getElementById('music-control');
        const backgroundMusic = document.getElementById('background-music');

        function renderMenu() {
            menuItems.forEach(item => {
                const itemEl = document.createElement('div');
                itemEl.className = 'menu-item';
                itemEl.innerHTML = `
                    <img src="${item.imageUrl}" alt="${item.name}">
                    <div class="item-details">
                        <div class="item-header"><h3>${item.name}</h3><span class="item-price">R$ ${item.price.toFixed(2)}</span></div>
                        <p class="item-description">${item.description}</p>
                        <div class="item-actions">
                            <div class="quantity-selector">
                                <button class="quantity-btn" data-action="decrease" data-id="${item.id}">-</button>
                                <span id="quantity-${item.id}">1</span>
                                <button class="quantity-btn" data-action="increase" data-id="${item.id}">+</button>
                            </div>
                            <button class="add-to-cart-btn" data-id="${item.id}">Adicionar 1</button>
                        </div>
                    </div>`;
                menuList.appendChild(itemEl);
            });
        }
        
        function updateCartSummary() {
            cartItemsList.innerHTML = '';
            const subtotal = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            cart.forEach(item => {
                const li = document.createElement('li');
                li.innerHTML = `<span>${item.quantity}x ${item.name}</span> <span>R$ ${(item.price * item.quantity).toFixed(2)}</span>`;
                cartItemsList.appendChild(li);
            });
            cartSubtotalEl.textContent = `R$ ${subtotal.toFixed(2)}`;
            cartCount.textContent = totalItems;
            cartButton.style.display = totalItems > 0 ? 'flex' : 'none';
            updateTotal();
        }

        function updateTotal() {
            const subtotal = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
            const isDelivery = document.getElementById('delivery').checked;
            const fee = isDelivery ? DELIVERY_FEE : 0;
            const total = subtotal + fee;
            cartDeliveryFeeEl.textContent = `R$ ${fee.toFixed(2)}`;
            cartTotalEl.textContent = `R$ ${total.toFixed(2)}`;
            addressField.style.display = isDelivery ? 'block' : 'none';
            customerAddressInput.required = isDelivery;
        }

        menuList.addEventListener('click', (e) => {
            const target = e.target;
            if (!target.dataset.id) return;
            const itemId = parseInt(target.dataset.id);
            const quantityEl = document.getElementById(`quantity-${itemId}`);
            let quantity = parseInt(quantityEl.textContent);

            if (target.classList.contains('quantity-btn')) {
                if (target.dataset.action === 'increase') quantity++;
                else if (quantity > 1) quantity--;
                quantityEl.textContent = quantity;
                const addBtn = target.closest('.item-actions').querySelector('.add-to-cart-btn');
                addBtn.textContent = `Adicionar ${quantity}`;
            }

            if (target.classList.contains('add-to-cart-btn')) {
                const menuItem = menuItems.find(item => item.id === itemId);
                const existingItem = cart.find(item => item.id === itemId);
                if (existingItem) {
                    existingItem.quantity += quantity;
                } else {
                    cart.push({ ...menuItem, quantity: quantity });
                }
                updateCartSummary();
                quantityEl.textContent = '1';
                target.textContent = `Adicionar 1`;
            }
        });
        
        deliveryOptions.forEach(option => option.addEventListener('change', updateTotal));
        cartButton.addEventListener('click', () => { cartModal.style.display = 'block'; cartView.style.display = 'block'; formView.style.display = 'none'; successView.style.display = 'none'; });
        closeBtn.addEventListener('click', () => cartModal.style.display = 'none');
        window.addEventListener('click', (e) => { if (e.target == cartModal) cartModal.style.display = 'none'; });
        clearCartBtn.addEventListener('click', () => { cart = []; updateCartSummary(); });
        finalizeOrderBtn.addEventListener('click', () => { if (cart.length === 0) { alert('Seu carrinho est√° vazio!'); return; } cartView.style.display = 'none'; formView.style.display = 'block'; });

        orderForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const isDelivery = document.getElementById('delivery').checked;
            const fee = isDelivery ? DELIVERY_FEE : 0;
            const subtotal = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
            
            const orderData = {
                customerName: document.getElementById('customerName').value,
                customerPhone: document.getElementById('customerPhone').value,
                deliveryMethod: isDelivery ? 'Entrega' : 'Retirada',
                customerAddress: isDelivery ? customerAddressInput.value : 'N/A',
                customerNotes: document.getElementById('customerNotes').value || "Nenhuma",
                paymentMethod: document.getElementById('paymentMethod').value,
                items: cart.map(({id, name, price, quantity}) => ({id, name, price, quantity})),
                deliveryFee: fee,
                total: subtotal + fee,
                status: "Novo",
                timestamp: serverTimestamp()
            };

            try {
                await addDoc(collection(db, "pedidos"), orderData);
                formView.style.display = 'none'; successView.style.display = 'block';
                cart = []; updateCartSummary();
                setTimeout(() => { cartModal.style.display = 'none'; }, 5000);
            } catch (error) { console.error("Erro: ", error); alert("Ocorreu um erro ao enviar seu pedido."); }
        });

        musicControl.addEventListener('click', () => {
            backgroundMusic.play().catch(e => console.log("Intera√ß√£o do usu√°rio necess√°ria."));
            backgroundMusic.muted = !backgroundMusic.muted;
            musicControl.textContent = backgroundMusic.muted ? 'üîá' : 'üîä';
        });

        renderMenu();
        updateTotal();
    </script>
</body>

</html>
